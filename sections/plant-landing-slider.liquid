{% schema %}
{
  "name": "Plant Landing Slider",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Shop Beautiful Plants for Every Home" },
    { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Premium plants, easy care, and fast delivery â€” everything you need to grow with confidence." },
    { "type": "text", "id": "button_text", "label": "Button text", "default": "View all items" },
    { "type": "url", "id": "button_link", "label": "Button link" }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Slide image" }
      ]
    }
  ],
  "presets": [{ "name": "Plant Landing Slider" }]
}
{% endschema %}

<style>
/* ================= DESKTOP ================= */
.plant-hero {
  display: flex;
  align-items: center;
  min-height: 80vh;
  padding: 60px;
  background: #fff;
  overflow: hidden;
}

.plant-hero__content {
  flex: 1;
  max-width: 480px;
}

.plant-hero__content h1 {
  font-size: 56px;
  line-height: 1.1;
  color: #1f3d1b;
  margin-bottom: 20px;
}

.plant-hero__content p {
  font-size: 18px;
  color: #555;
}

.plant-hero__btn {
  display: inline-block;
  margin-top: 25px;
  background: #1f3d1b;
  color: #fff;
  padding: 14px 34px;
  border-radius: 10px;
  font-weight: 600;
}

.plant-hero__slider {
  flex: 1;
  position: relative;
  text-align: center;
}

.plant-slide { display: none; }
.plant-slide.active { display: block; }

.plant-slide img {
  max-width: 360px;
  height: auto;
  margin: 0 auto;
}

.plant-dots {
  position: absolute;
  right: -30px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.plant-dot {
  width: 10px;
  height: 10px;
  background: #cfd8cf;
  border-radius: 50%;
  cursor: pointer;
}

.plant-dot.active { background: #1f3d1b; }

/* ================= MOBILE CARD UI ================= */
@media (max-width: 768px) {
  .plant-hero {
    flex-direction: column;
    padding: 20px 16px 40px;
    background: #f3f8f4;
  }

  .plant-hero__content,
  .plant-hero__slider {
    width: 100%;
  }

  .plant-hero__content {
    background: #fff;
    border-radius: 28px;
    padding: 24px 20px 28px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.08);
    text-align: left;
    order: 1;
  }

  .plant-hero__content h1 {
    font-size: 26px;
    line-height: 1.2;
    margin-bottom: 12px;
  }

  .plant-hero__content p {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 18px;
  }

  .plant-hero__btn {
    padding: 12px 22px;
    font-size: 14px;
  }

  .plant-hero__slider {
    order: 2;
    margin-top: -10px;
  }

  .plant-slide img {
    max-width: 160px;
    margin: 0 auto 10px;
  }

  .plant-dots {
    position: static;
    flex-direction: row;
    justify-content: center;
    margin-top: 10px;
    transform: none;
  }
}

/* ================================
   RESPONSIVE FIXES
================================ */

/* Tablets */
@media (max-width: 1024px) {
  .plant-hero {
    padding: 40px 30px;
    gap: 30px;
  }

  .plant-hero__content h1 {
    font-size: 42px;
  }

  .plant-hero__content p {
    font-size: 16px;
  }

  .plant-slide img {
    max-width: 300px;
  }
}

/* Mobile */
@media (max-width: 768px) {
  .plant-hero {
    flex-direction: column;
    padding: 24px 16px 40px;
    min-height: auto;
    background: #f3f8f4;
  }

  .plant-hero__content {
    max-width: 100%;
    text-align: left;
    background: #ffffff;
    border-radius: 26px;
    padding: 22px 20px 26px;
    box-shadow: 0 10px 32px rgba(0,0,0,0.08);
    order: 1;
  }

  .plant-hero__content h1 {
    font-size: 26px;
    line-height: 1.25;
    margin-bottom: 12px;
  }

  .plant-hero__content p {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 18px;
  }

  .plant-hero__btn {
    padding: 12px 22px;
    font-size: 14px;
  }

  .plant-hero__slider {
    order: 2;
    margin-top: -8px;
    width: 100%;
    text-align: center;
  }

  .plant-slide img {
    max-width: 170px;
    margin: 0 auto 12px;
  }

  .plant-dots {
    position: static;
    transform: none;
    flex-direction: row;
    justify-content: center;
    gap: 8px;
    margin-top: 10px;
  }
}

/* Small phones */
@media (max-width: 480px) {
  .plant-hero__content h1 {
    font-size: 24px;
  }

  .plant-slide img {
    max-width: 150px;
  }
}

</style>

<section class="plant-hero" id="plantHero">
  <div class="plant-hero__content">
    <h1>{{ section.settings.heading }}</h1>
    <p>{{ section.settings.subtext }}</p>
    <a href="{{ section.settings.button_link }}" class="plant-hero__btn">
      {{ section.settings.button_text }}
    </a>
  </div>

  <div class="plant-hero__slider">
    {% assign slide_blocks = section.blocks | where: "type", "slide" %}

    {% for block in slide_blocks %}
      <div class="plant-slide {% if forloop.first %}active{% endif %}">
        {% if block.settings.image %}
          <img
            src="{{ block.settings.image | image_url: width: 600 }}"
            alt="{{ block.settings.image.alt | escape }}"
            width="{{ block.settings.image.width }}"
            height="{{ block.settings.image.height }}"
            loading="lazy"
          >
        {% endif %}
      </div>
    {% endfor %}

    {% if slide_blocks.size > 1 %}
      <div class="plant-dots">
        {% for block in slide_blocks %}
          <span class="plant-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const slider = document.getElementById('plantHero');
  if (!slider) return;

  const slides = slider.querySelectorAll('.plant-slide');
  const dots = slider.querySelectorAll('.plant-dot');
  let current = 0;

  function showSlide(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
    current = i;
  }

  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      showSlide(parseInt(dot.dataset.index, 10));
    });
  });

  if (slides.length > 1) {
    setInterval(() => {
      showSlide((current + 1) % slides.length);
    }, 4000);
  }
});
</script>
