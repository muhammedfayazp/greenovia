{% schema %}
{
  "name": "Plant Landing Slider",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Grow Beautiful Plants at Home" },
    { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Shop our organic, hand-picked selection of plants & accessories." },
    { "type": "text", "id": "button_text", "label": "Button text", "default": "Shop Now" },
    { "type": "url", "id": "button_link", "label": "Button link" }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Slide image" }
      ]
    }
  ],
  "presets": [{ "name": "Plant Landing Slider" }]
}
{% endschema %}

<style>
.plant-hero {
  display: flex;
  align-items: center;
  min-height: 80vh;
  padding: 60px;
  background: #fff;
  overflow: hidden;
}

.plant-hero__content {
  flex: 1;
  max-width: 480px;
}

.plant-hero__content h1 {
  font-size: 56px;
  line-height: 1.1;
  color: #1f3d1b;
  margin-bottom: 20px;
}

.plant-hero__content p {
  font-size: 18px;
  color: #555;
}

.plant-hero__btn {
  display: inline-block;
  margin-top: 25px;
  background: #4caf50;
  color: #fff;
  padding: 14px 34px;
  border-radius: 6px;
  font-weight: 600;
}

.plant-hero__slider {
  flex: 1;
  position: relative;
}

.plant-slide {
  display: none;
}

.plant-slide.active {
  display: block;
}

.plant-slide img {
  max-width: 100%;
  height: auto;
}

.plant-dots {
  position: absolute;
  right: -30px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.plant-dot {
  width: 12px;
  height: 12px;
  background: #ccc;
  border-radius: 50%;
  cursor: pointer;
}

.plant-dot.active {
  background: #4caf50;
}
</style>

<section class="plant-hero" id="plantHero">
  <div class="plant-hero__content">
    <h1>{{ section.settings.heading }}</h1>
    <p>{{ section.settings.subtext }}</p>
    <a href="{{ section.settings.button_link }}" class="plant-hero__btn">
      {{ section.settings.button_text }}
    </a>
  </div>

  <div class="plant-hero__slider">
    {% for block in section.blocks %}
      <div class="plant-slide {% if forloop.first %}active{% endif %}">
        {% if block.settings.image %}
          <img src="{{ block.settings.image | img_url: '900x' }}" alt="">
        {% endif %}
      </div>
    {% endfor %}

    <div class="plant-dots">
      {% for block in section.blocks %}
        <span class="plant-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
      {% endfor %}
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const slides = document.querySelectorAll('#plantHero .plant-slide');
  const dots = document.querySelectorAll('#plantHero .plant-dot');
  let current = 0;

  function showSlide(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
    current = i;
  }

  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      showSlide(parseInt(dot.dataset.index));
    });
  });

  setInterval(() => {
    showSlide((current + 1) % slides.length);
  }, 4000);
});
</script>
