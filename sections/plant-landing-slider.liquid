{% schema %}
{
  "name": "Plant Landing Slider",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Shop Beautiful Plants for Every Home" },
    { "type": "textarea", "id": "subtext", "label": "Subtext", "default": "Premium plants, easy care, and fast delivery ‚Äî everything you need to grow with confidence." },
    { "type": "text", "id": "button_text", "label": "Button text", "default": "View all items" },
    { "type": "url", "id": "button_link", "label": "Button link" }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Slide image" }
      ]
    }
  ],
  "presets": [{ "name": "Plant Landing Slider" }]
}
{% endschema %}

{% assign slide_blocks = section.blocks | where: "type", "slide" %}

<style>
/* Base */
.hero-desktop { display: flex; }
.hero-mobile { display: none; }

/* ===== Desktop ===== */
.hero-desktop {
  min-height: 80vh;
  padding: 60px;
  gap: 40px;
  background: #fff;
  align-items: center;
}

.hero-left { max-width: 520px; }
.hero-left h1 { font-size: 56px; color: #1f3d1b; }
.hero-left p { font-size: 18px; color: #555; }

.hero-btn {
  display: inline-block;
  margin-top: 24px;
  background: #1f3d1b;
  color: #fff;
  padding: 14px 34px;
  border-radius: 10px;
}

.hero-right { flex: 1; text-align: center; position: relative; }

.plant-slide { display: none; }
.plant-slide.active { display: block; }

.plant-slide img { max-width: 360px; margin: auto; }

.plant-dots {
  position: absolute;
  right: -30px;
  top: 50%;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.plant-dot {
  width: 10px;
  height: 10px;
  background: #cfd8cf;
  border-radius: 50%;
}
.plant-dot.active { background: #1f3d1b; }

/* ===== Mobile ===== */
@media (max-width: 768px) {
  .hero-desktop { display: none !important; }
  .hero-mobile { display: block !important; }

  .hero-mobile {
    padding: 20px 14px 32px;
    background: #fff;
  }

  .hero-mobile-card {
    background: #f4faf4;
    border-radius: 36px;
    padding: 28px 22px;
    box-shadow: 0 16px 40px rgba(0,0,0,.08);
  }

  .hero-mobile-card h1 {
    font-size: 26px;
    color: #1f3d1b;
    margin-bottom: 12px;
  }

  .hero-mobile-card p {
    font-size: 14px;
    margin-bottom: 16px;
    color: #555;
  }

  .hero-mobile-image {
    text-align: center;
    margin: 20px 0;
  }

  .hero-mobile-image img {
    max-width: 180px;
    margin: auto;
  }

  .hero-btn.full {
    width: 100%;
    text-align: center;
    margin-top: 10px;
  }

  .hero-mobile .plant-dots {
    position: static;
    flex-direction: row;
    justify-content: center;
    margin-top: 12px;
    gap: 8px;
  }
}

</style>

<section class="plant-hero" id="plantHero">

  {% assign slide_blocks = section.blocks | where: "type", "slide" %}

  <!-- ================= DESKTOP HERO ================= -->
  <div class="hero-desktop">
    <div class="hero-left">
      <h1>{{ section.settings.heading }}</h1>
      <p>{{ section.settings.subtext }}</p>
      <a href="{{ section.settings.button_link }}" class="hero-btn">
        {{ section.settings.button_text }}
      </a>
    </div>

    <div class="hero-right">
      {% for block in slide_blocks %}
        <div class="plant-slide {% if forloop.first %}active{% endif %}">
          {% if block.settings.image %}
            <img src="{{ block.settings.image | image_url: width: 600 }}" alt="">
          {% endif %}
        </div>
      {% endfor %}

      <div class="plant-dots">
        {% for block in slide_blocks %}
          <span class="plant-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- ============ MOBILE HERO ============ -->
<div class="hero-mobile">
  <div class="hero-mobile-card">

    <div class="hero-mobile-top">
      <div class="hero-mobile-text">
        <h1>{{ section.settings.heading }}</h1>
        <p>{{ section.settings.subtext }}</p>
        <a href="{{ section.settings.button_link }}" class="hero-btn full">
          {{ section.settings.button_text }}
        </a>
      </div>

      <div class="hero-mobile-image">
        {% for block in slide_blocks %}
          <div class="plant-slide {% if forloop.first %}active{% endif %}">
            {% if block.settings.image %}
              <img
                src="{{ block.settings.image | image_url: width: 400 }}"
                alt="{{ block.settings.image.alt | escape }}"
                width="{{ block.settings.image.width }}"
                height="{{ block.settings.image.height }}"
                loading="lazy"
              >
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>

    {% if slide_blocks.size > 1 %}
      <div class="plant-dots">
        {% for block in slide_blocks %}
          <span class="plant-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Features -->
    <div class="hero-mobile-features">
      <div class="feature-item">
        <span>üöö</span>
        <div>
          <strong>Fast Delivery</strong>
          <p>Fresh plants at your doorstep</p>
        </div>
      </div>

      <div class="feature-item">
        <span>üå±</span>
        <div>
          <strong>Healthy Plants</strong>
          <p>Grown with expert care</p>
        </div>
      </div>

      <div class="feature-item">
        <span>‚≠ê</span>
        <div>
          <strong>Premium Quality</strong>
          <p>Hand-picked for your home</p>
        </div>
      </div>
    </div>

  </div>
</div>


</section>


<script>
document.addEventListener('DOMContentLoaded', function () {
  const slider = document.getElementById('plantHero');
  if (!slider) return;

  const slides = slider.querySelectorAll('.plant-slide');
  const dots = slider.querySelectorAll('.plant-dot');
  let current = 0;

  function showSlide(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
    current = i;
  }

  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      showSlide(parseInt(dot.dataset.index, 10));
    });
  });

  if (slides.length > 1) {
    setInterval(() => {
      showSlide((current + 1) % slides.length);
    }, 4000);
  }
});
</script>
