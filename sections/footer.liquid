{% comment %}
  Footer Section
{% endcomment %}

<footer class="footer" data-section-id="{{ section.id }}">
  <div class="container">
    <div class="footer__main">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'text' -%}
            <div class="footer__column" {{ block.shopify_attributes }}>
              {%- if block.settings.title != blank -%}
                <h3 class="footer__column-title">{{ block.settings.title }}</h3>
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                <div class="footer__text">{{ block.settings.text }}</div>
              {%- endif -%}
              {%- if block.settings.show_social -%}
                <div class="footer__social">
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                    </a>
                  {%- endif -%}
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line></svg>
                    </a>
                  {%- endif -%}
                  {%- if settings.social_pinterest_link != blank -%}
                    <a href="{{ settings.social_pinterest_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.24 2.64 7.86 6.35 9.34-.09-.76-.17-1.95.03-2.79.18-.76 1.17-4.98 1.17-4.98s-.3-.6-.3-1.48c0-1.39.81-2.43 1.81-2.43.85 0 1.26.64 1.26 1.41 0 .86-.55 2.15-.83 3.35-.24.99.5 1.8 1.48 1.8 1.77 0 3.13-1.87 3.13-4.57 0-2.39-1.72-4.06-4.17-4.06-2.84 0-4.51 2.13-4.51 4.33 0 .86.33 1.78.74 2.28.08.1.09.19.07.29-.07.31-.24 1-.27 1.14-.04.18-.14.22-.32.13-1.24-.58-2.02-2.39-2.02-3.85 0-3.14 2.28-6.03 6.58-6.03 3.45 0 6.14 2.46 6.14 5.75 0 3.43-2.16 6.19-5.17 6.19-1.01 0-1.96-.52-2.28-1.14 0 0-.5 1.9-.62 2.36-.22.86-.83 1.94-1.24 2.6.93.29 1.93.44 2.97.44 5.52 0 10-4.48 10-10S17.52 2 12 2z"/></svg>
                    </a>
                  {%- endif -%}
                </div>
              {%- endif -%}
            </div>

          {%- when 'menu' -%}
            <div class="footer__column" {{ block.shopify_attributes }}>
              {%- if block.settings.title != blank -%}
                <h3 class="footer__column-title">{{ block.settings.title }}</h3>
              {%- endif -%}
              {%- if linklists[block.settings.menu].links.size > 0 -%}
                <ul class="footer__list">
                  {%- for link in linklists[block.settings.menu].links -%}
                    <li class="footer__list-item">
                      <a href="{{ link.url }}" class="footer__link">{{ link.title }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}
            </div>

          {%- when 'newsletter' -%}
            <div class="footer__column" {{ block.shopify_attributes }}>
              {%- if block.settings.title != blank -%}
                <h3 class="footer__column-title">{{ block.settings.title }}</h3>
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                <div class="footer__text">{{ block.settings.text }}</div>
              {%- endif -%}
              {%- form 'customer', class: 'footer__newsletter-form' -%}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="newsletter-form">
                  <input 
                    type="email" 
                    name="contact[email]" 
                    placeholder="Your email"
                    class="newsletter-form__input"
                    required
                  >
                  <button type="submit" class="btn btn-primary">Subscribe</button>
                </div>
                {%- if form.posted_successfully? -%}
                  <p class="form-success">Thanks for subscribing!</p>
                {%- endif -%}
              {%- endform -%}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>

    <div class="footer__bottom">
      <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.</p>
      <div class="footer__payment-icons">
        {%- for type in shop.enabled_payment_types -%}
          {{ type | payment_type_svg_tag: class: 'payment-icon' }}
        {%- endfor -%}
      </div>
    </div>
  </div>
</footer>

<style>
  .newsletter-form {
    display: flex;
    gap: var(--space-sm);
    margin-top: var(--space-md);
  }

  .newsletter-form__input {
    flex: 1;
    padding: 1rem;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-sm);
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--color-white);
  }

  .newsletter-form__input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }

  .footer__payment-icons {
    display: flex;
    gap: var(--space-sm);
    justify-content: center;
    margin-top: var(--space-md);
  }

  .payment-icon {
    height: 30px;
    width: auto;
    opacity: 0.6;
  }

  .form-success {
    color: var(--color-success);
    margin-top: var(--space-sm);
  }
</style>

{% schema %}
{
  "name": "Footer",
  "settings": [],
  "blocks": [
    {
      "type": "text",
      "name": "Text Column",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "About Greenovia"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Your trusted source for premium plants and garden supplies in UAE.</p>"
        },
        {
          "type": "checkbox",
          "id": "show_social",
          "label": "Show social media icons",
          "default": true
        }
      ]
    },
    {
      "type": "menu",
      "name": "Menu Column",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu",
          "default": "footer"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Newsletter"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Get 10% off your first order plus weekly plant care tips!</p>"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "text"
      },
      {
        "type": "menu"
      },
      {
        "type": "newsletter"
      }
    ]
  }
}
{% endschema %}
