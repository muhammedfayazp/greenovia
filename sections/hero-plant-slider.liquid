<div class="hero-plant-slider" id="heroPlantSlider">
  {% for slide in slide_blocks %}
    <div class="hero-plant-slide {% if forloop.first %}active{% endif %}">
      <section class="hero-plant">
        <div class="hero-left">
          <h1>{{ section.settings.heading | replace: 'plants', '<span>plants</span>' }}</h1>
          <p>{{ section.settings.subtext }}</p>

          <a href="{{ section.settings.button_link }}" class="hero-btn">
            {{ section.settings.button_text }}
          </a>

          <div class="hero-features">
            {% for feature in feature_blocks %}
              <div class="hero-feature" {{ feature.shopify_attributes }}>
                {% if feature.settings.icon %}
                  <img
                    src="{{ feature.settings.icon | image_url: width: 40 }}"
                    alt="{{ feature.settings.title }}"
                    width="{{ feature.settings.icon.width }}"
                    height="{{ feature.settings.icon.height }}"
                    loading="lazy"
                    class="hero-feature__icon"
                  >
                {% endif %}
                <strong>{{ feature.settings.title }}</strong>
                {{ feature.settings.text }}
              </div>
            {% endfor %}
          </div>
        </div>

        <div class="hero-right">
          <div class="hero-img">
            {% if slide.settings.image %}
              <img
                src="{{ slide.settings.image | image_url: width: 600 }}"
                alt="Plant"
                width="{{ slide.settings.image.width }}"
                height="{{ slide.settings.image.height }}"
                loading="lazy"
              >
            {% endif %}
          </div>
        </div>
      </section>
    </div>
  {% endfor %}

  {% if slide_blocks.size > 1 %}
    <div class="hero-dots">
      {% for slide in slide_blocks %}
        <span class="hero-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
      {% endfor %}
    </div>
  {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const slider = document.getElementById('heroPlantSlider');
  if (!slider) return;

  const slides = slider.querySelectorAll('.hero-plant-slide');
  const dots = slider.querySelectorAll('.hero-dot');
  if (!slides.length) return;

  let current = 0;

  function show(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
    current = i;
  }

  dots.forEach(dot => {
    dot.addEventListener('click', () => show(parseInt(dot.dataset.index, 10)));
  });

  if (slides.length > 1) {
    setInterval(() => {
      show((current + 1) % slides.length);
    }, 5000);
  }
});
</script>
