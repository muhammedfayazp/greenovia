<section class="shopcat">
  <div class="shopcat__container page-width">

    <div class="shopcat__head">
      <h2 class="shopcat__title">{{ section.settings.heading }}</h2>

      {% if section.settings.view_more_link != blank %}
        <a href="{{ section.settings.view_more_link }}" class="shopcat__more">
          {{ section.settings.view_more_text }} â†’
        </a>
      {% endif %}
    </div>

    <div class="shopcat__list">
      {% for block in section.blocks %}
        {% assign col = collections[block.settings.collection] %}
        {% if col != blank %}
          <a href="{{ col.url }}" class="shopcat__card">
            <div class="shopcat__img">
              {% if block.settings.image != blank %}
                <img
                  src="{{ block.settings.image | image_url: width: 600 }}"
                  alt="{{ col.title | escape }}"
                  loading="lazy"
                >
              {% elsif col.featured_image %}
                <img
                  src="{{ col.featured_image | image_url: width: 600 }}"
                  alt="{{ col.title | escape }}"
                  loading="lazy"
                >
              {% endif %}
            </div>

            <div class="shopcat__info">
              <h3>{{ col.title }}</h3>
              <span class="shopcat__cta">Shop now</span>
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>

  </div>
</section>

<style>
.shopcat{
  background:#f6f7f2;
  padding: 30px 0 50px;
}

.shopcat__container{
  padding-left:24px !important;
  padding-right:24px !important;
}

/* Header */
.shopcat__head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:24px;
}
.shopcat__title{
  margin:0;
  font-size:28px;
  color:#1f3d2b;
}
.shopcat__more{
  font-size:14px;
  color:#1f3d2b;
  text-decoration:none;
  white-space:nowrap;
}
.shopcat__more:hover{ text-decoration: underline; }

/* Horizontal row */
.shopcat__list{
  display:grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(220px, 1fr);
  gap:20px;
  overflow-x:auto;
  padding-bottom:6px;
  scroll-snap-type:x mandatory;
}
.shopcat__list::-webkit-scrollbar{
  height:6px;
}
.shopcat__list::-webkit-scrollbar-thumb{
  background:rgba(0,0,0,.2);
  border-radius:10px;
}

/* Card */
.shopcat__card{
  scroll-snap-align:start;
  background:#fff;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
  text-decoration:none;
  color:inherit;
  transition: transform .25s ease;
}
.shopcat__card:hover{
  transform: translateY(-4px);
}

.shopcat__img{
  aspect-ratio: 4/3;
  background:#eee;
}
.shopcat__img img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* Info */
.shopcat__info{
  padding:14px;
  text-align:center;
}
.shopcat__info h3{
  margin:0 0 6px;
  font-size:15px;
  font-weight:600;
  color:#1f3d2b;
}
.shopcat__cta{
  font-size:13px;
  color:#1f3d2b;
  opacity:.8;
}

/* Desktop grid feel */
@media (min-width: 990px){
  .shopcat__list{
    grid-auto-flow: initial;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    overflow-x:hidden;
  }
}

/* Mobile */
@media (max-width:768px){
  .shopcat__container{
    padding-left:16px !important;
    padding-right:16px !important;
  }
  .shopcat__title{
    font-size:24px;
  }
}
</style>

{% schema %}
{
  "name": "Shop by Category (Row)",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by Category"
    },
    {
      "type": "text",
      "id": "view_more_text",
      "label": "View more text",
      "default": "View more"
    },
    {
      "type": "url",
      "id": "view_more_link",
      "label": "View more link"
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Select collection"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Custom image (optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shop by Category Row",
      "blocks": [
        { "type": "category" },
        { "type": "category" },
        { "type": "category" },
        { "type": "category" }
      ]
    }
  ]
}
{% endschema %}
